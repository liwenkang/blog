@import 'tailwindcss';

@config '../tailwind.config.js';

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

.task-list-item::before {
  @apply hidden;
}

.task-list-item {
  @apply list-none;
}

.footnotes {
  @apply mt-12 border-t border-gray-200 pt-8 dark:border-gray-700;
}

.csl-entry {
  @apply my-5;
}

/* https://stackoverflow.com/questions/61083813/how-to-avoid-internal-autofill-selected-style-to-be-applied */
input:-webkit-autofill,
input:-webkit-autofill:focus {
  transition:
    background-color 600000s 0s,
    color 600000s 0s;
}

/* Accessibility improvements */
@layer base {
  html {
    scroll-behavior: smooth;
    @supports (scroll-behavior: smooth) {
      scroll-behavior: smooth;
    }
  }

  body {
    @apply text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-900;
    @apply antialiased;
  }

  /* Ensure proper contrast for text selection */
  * {
    @apply selection:bg-primary-100 dark:selection:bg-primary-900;
    @apply selection:text-primary-900 dark:selection:text-primary-100;
  }
}

@layer components {
  /* Basic accessibility improvements */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  /* Skip link styles */
  .skip-link {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100;
    @apply border border-gray-300 dark:border-gray-600;
    @apply px-4 py-2;
    @apply -translate-y-full;
    @apply focus:translate-y-0;
    @apply transition-transform duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  /* Basic focus styles */
  button:focus,
  a:focus,
  input:focus,
  textarea:focus,
  select:focus,
  [tabindex]:not([tabindex='-1']):focus {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [tabindex]:not([tabindex='-1']):focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-black;
  }

  /* Form controls */
  .form-control {
    @apply border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 rounded-md px-4 py-2;
  }

  .form-control:focus {
    @apply border-transparent focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-black;
  }

  /* Link styles */
  .link-interactive {
    @apply text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 transition-colors duration-200;
  }

  .link-interactive:focus {
    @apply outline-none ring-2 ring-primary-500 ring-offset-1 rounded;
  }

  .link-interactive:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-1 rounded;
  }
}
