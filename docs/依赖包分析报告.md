# é¡¹ç›®ä¾èµ–åŒ…åˆ†ææŠ¥å‘Š

## ğŸ“Š æ¦‚è§ˆ

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **Next.js + Tailwind CSS** çš„ MDX åšå®¢æ¨¡æ¿ã€‚æ€»ä¾èµ–æ•°ï¼š40ä¸ªï¼ˆç”Ÿäº§ç¯å¢ƒ26ä¸ª + å¼€å‘ç¯å¢ƒ14ä¸ªï¼‰

---

## ğŸŸ¢ å¿…é¡»ä¾èµ–ï¼ˆæ ¸å¿ƒåŠŸèƒ½ä¾èµ–ï¼‰

### React & Next.js æ ¸å¿ƒ (5ä¸ª)

| åŒ…å           | ç‰ˆæœ¬    | ç”¨é€”           | ä¸å¯æ›¿ä»£æ€§        |
| -------------- | ------- | -------------- | ----------------- |
| `next`         | ^15.5.7 | æ¡†æ¶æ ¸å¿ƒ       | â­â­â­â­â­ å¿…é¡»   |
| `react`        | 19.2.0  | UIåº“           | â­â­â­â­â­ å¿…é¡»   |
| `react-dom`    | 19.2.0  | React DOMæ¸²æŸ“  | â­â­â­â­â­ å¿…é¡»   |
| `@types/react` | 19.2.7  | TypeScriptç±»å‹ | â­â­â­â­ å¼ºçƒˆæ¨è |
| `typescript`   | ^5.9.3  | ç±»å‹æ£€æŸ¥       | â­â­â­â­ å¼ºçƒˆæ¨è |

### æ ·å¼æ¡†æ¶ (3ä¸ª)

| åŒ…å                      | ç‰ˆæœ¬    | ç”¨é€”        | ä¸å¯æ›¿ä»£æ€§      |
| ------------------------- | ------- | ----------- | --------------- |
| `tailwindcss`             | ^4.1.15 | CSSæ¡†æ¶     | â­â­â­â­â­ å¿…é¡» |
| `@tailwindcss/forms`      | ^0.5.10 | è¡¨å•æ ·å¼    | â­â­â­ æ¨è     |
| `@tailwindcss/typography` | ^0.5.19 | æ’ç‰ˆæ ·å¼    | â­â­â­â­ é‡è¦   |
| `postcss`                 | ^8.5.6  | CSSå¤„ç†     | â­â­â­â­â­ å¿…é¡» |
| `@tailwindcss/postcss`    | ^4.1.15 | PostCSSæ’ä»¶ | â­â­â­â­ é‡è¦   |

### MDX å†…å®¹å¤„ç† (9ä¸ª)

| åŒ…å                       | ç‰ˆæœ¬    | ç”¨é€”               | ä¸å¯æ›¿ä»£æ€§      |
| -------------------------- | ------- | ------------------ | --------------- |
| `mdx-bundler`              | ^10.1.1 | MDXç¼–è¯‘            | â­â­â­â­â­ å¿…é¡» |
| `gray-matter`              | ^4.0.3  | Frontmatterè§£æ    | â­â­â­â­â­ å¿…é¡» |
| `remark-gfm`               | ^4.0.1  | GitHubé£æ ¼Markdown | â­â­â­â­ é‡è¦   |
| `remark-math`              | ^6.0.0  | LaTeXæ•°å­¦å…¬å¼      | â­â­â­ æ¨è     |
| `rehype-slug`              | ^6.0.0  | æ ‡é¢˜IDç”Ÿæˆ         | â­â­â­ æ¨è     |
| `rehype-autolink-headings` | ^7.1.0  | æ ‡é¢˜è‡ªåŠ¨é“¾æ¥       | â­â­â­ æ¨è     |
| `rehype-katex`             | ^7.0.1  | KaTeXæ•°å­¦æ”¯æŒ      | â­â­â­ æ¨è     |
| `rehype-citation`          | ^2.3.1  | å¼•ç”¨æ”¯æŒ           | â­â­ å¯é€‰       |
| `rehype-prism-plus`        | ^2.0.1  | ä»£ç é«˜äº®           | â­â­â­â­ é‡è¦   |
| `unist-util-visit`         | ^5.0.0  | ASTéå†            | â­â­â­â­ é‡è¦   |
| `rehype-preset-minify`     | 7.0.1   | HTMLå‹ç¼©           | â­â­ å¯é€‰       |

### å®ç”¨å·¥å…·åº“ (4ä¸ª)

| åŒ…å             | ç‰ˆæœ¬    | ç”¨é€”         | ä¸å¯æ›¿ä»£æ€§  |
| ---------------- | ------- | ------------ | ----------- |
| `next-themes`    | ^0.4.6  | ä¸»é¢˜åˆ‡æ¢     | â­â­â­ æ¨è |
| `reading-time`   | 1.5.0   | é˜…è¯»æ—¶é—´è®¡ç®— | â­â­ å¯é€‰   |
| `github-slugger` | ^2.0.0  | slugç”Ÿæˆ     | â­â­â­ æ¨è |
| `sharp`          | ^0.34.4 | å›¾ç‰‡å¤„ç†ä¼˜åŒ– | â­â­â­ æ¨è |
| `image-size`     | 2.0.2   | å›¾ç‰‡å°ºå¯¸è¯»å– | â­â­ å¯é€‰   |

### å­—ä½“å’ŒCDN (2ä¸ª)

| åŒ…å                | ç‰ˆæœ¬   | ç”¨é€”         | ä¸å¯æ›¿ä»£æ€§ |
| ------------------- | ------ | ------------ | ---------- |
| `@fontsource/inter` | ^5.2.8 | Interå­—ä½“    | â­â­ å¯é€‰  |
| `web-vitals`        | ^5.1.0 | æ€§èƒ½æŒ‡æ ‡æ”¶é›† | â­â­ å¯é€‰  |

### ç›‘æ§å’Œåˆ†æ (2ä¸ª)

| åŒ…å             | ç‰ˆæœ¬     | ç”¨é€”     | ä¸å¯æ›¿ä»£æ€§ |
| ---------------- | -------- | -------- | ---------- |
| `@sentry/nextjs` | ^10.29.0 | é”™è¯¯ç›‘æ§ | â­â­ å¯é€‰  |
| `@sentry/replay` | ^7.116.0 | ä¼šè¯é‡æ”¾ | â­ å¯é€‰    |

### å…¶ä»– (2ä¸ª)

| åŒ…å                             | ç‰ˆæœ¬     | ç”¨é€”          | ä¸å¯æ›¿ä»£æ€§  |
| -------------------------------- | -------- | ------------- | ----------- |
| `esbuild`                        | ^0.25.11 | JSæ„å»ºå·¥å…·    | â­â­â­ æ¨è |
| `@mailchimp/mailchimp_marketing` | ^3.0.80  | é‚®ä»¶è®¢é˜…æœåŠ¡  | â­ å¯é€‰     |
| `preact`                         | ^10.27.2 | Reactè½»é‡æ›¿ä»£ | â­â­ å¯é€‰   |

---

## ğŸŸ¡ å¯é€‰ä¾èµ–ï¼ˆå¼€å‘å·¥å…·ï¼‰

### å¼€å‘æ¡†æ¶å·¥å…· (8ä¸ª)

| åŒ…å                          | ç‰ˆæœ¬    | ç”¨é€”             | æ˜¯å¦å¿…é¡»  |
| ----------------------------- | ------- | ---------------- | --------- |
| `@next/bundle-analyzer`       | ^15.5.6 | åŒ…åˆ†æå·¥å…·       | ğŸ”„ å¼€å‘ç”¨ |
| `eslint`                      | ^9.38.0 | ä»£ç æ£€æŸ¥         | ğŸ”„ å¯é€‰   |
| `eslint-config-next`          | 15.5.6  | ESLinté…ç½®       | ğŸ”„ å¯é€‰   |
| `eslint-config-prettier`      | ^10.1.8 | Prettieré›†æˆ     | ğŸ”„ å¯é€‰   |
| `eslint-plugin-prettier`      | ^5.5.4  | ESLintæ’ä»¶       | ğŸ”„ å¯é€‰   |
| `eslint-plugin-mdx`           | ^3.6.2  | MDXæ£€æŸ¥          | ğŸ”„ å¯é€‰   |
| `prettier`                    | ^3.6.2  | ä»£ç æ ¼å¼åŒ–       | ğŸ”„ æ¨è   |
| `prettier-plugin-tailwindcss` | ^0.7.1  | Tailwindæ ¼å¼æ’ä»¶ | ğŸ”„ å¯é€‰   |

### æµ‹è¯•å·¥å…· (4ä¸ª)

| åŒ…å                          | ç‰ˆæœ¬    | ç”¨é€”         | æ˜¯å¦å¿…é¡» |
| ----------------------------- | ------- | ------------ | -------- |
| `jest`                        | ^29.7.0 | æµ‹è¯•æ¡†æ¶     | ğŸ”„ å¯é€‰  |
| `jest-environment-jsdom`      | ^29.7.0 | æµ‹è¯•ç¯å¢ƒ     | ğŸ”„ å¯é€‰  |
| `@testing-library/react`      | ^14.1.2 | ç»„ä»¶æµ‹è¯•     | ğŸ”„ å¯é€‰  |
| `@testing-library/jest-dom`   | ^6.1.6  | æµ‹è¯•å·¥å…·åº“   | ğŸ”„ å¯é€‰  |
| `@testing-library/user-event` | ^14.5.1 | ç”¨æˆ·äº¤äº’æµ‹è¯• | ğŸ”„ å¯é€‰  |

### Gitå·¥å…· (2ä¸ª)

| åŒ…å          | ç‰ˆæœ¬    | ç”¨é€”       | æ˜¯å¦å¿…é¡» |
| ------------- | ------- | ---------- | -------- |
| `husky`       | ^9.1.7  | Gité’©å­    | ğŸ”„ æ¨è  |
| `lint-staged` | ^16.2.5 | é¢„æäº¤æ£€æŸ¥ | ğŸ”„ æ¨è  |

### å…¶ä»–å¼€å‘å·¥å…· (5ä¸ª)

| åŒ…å                | ç‰ˆæœ¬     | ç”¨é€”            | æ˜¯å¦å¿…é¡» |
| ------------------- | -------- | --------------- | -------- |
| `cross-env`         | ^10.1.0  | è·¨å¹³å°ç¯å¢ƒå˜é‡  | ğŸ”„ æ¨è  |
| `next-remote-watch` | ^2.0.0   | æ–‡ä»¶ç›‘å¬        | ğŸ”„ å¯é€‰  |
| `socket.io`         | ^4.8.1   | å®æ—¶é€šä¿¡        | ğŸ”„ å¯é€‰  |
| `socket.io-client`  | ^4.8.1   | WebSocketå®¢æˆ·ç«¯ | ğŸ”„ å¯é€‰  |
| `@svgr/webpack`     | ^8.1.0   | SVGå¯¼å…¥         | ğŸ”„ æ¨è  |
| `file-loader`       | ^6.2.0   | æ–‡ä»¶åŠ è½½        | ğŸ”„ æ¨è  |
| `globby`            | 15.0.0   | æ–‡ä»¶åŒ¹é…        | ğŸ”„ æ¨è  |
| `inquirer`          | ^12.10.0 | äº¤äº’å¼CLI       | ğŸ”„ æ¨è  |
| `dedent`            | ^1.7.0   | å­—ç¬¦ä¸²ç¼©è¿›      | ğŸ”„ æ¨è  |

---

## ğŸ”´ éå¿…é¡»ä¾èµ–åˆ†æ

### 1. **å¯ä»¥è€ƒè™‘ç§»é™¤çš„ä¾èµ–** âŒ

#### `preact` (^10.27.2)

- **å½“å‰ç”¨é€”**: âš ï¸ **å®é™…ä¸Šè¢«ä½¿ç”¨**ï¼åœ¨ `next.config.js` ä¸­é…ç½®ç”¨äºç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
- **å…·ä½“é…ç½®**:
  ```javascript
  // next.config.js ç¬¬78-84è¡Œ
  if (!dev && !isServer) {
    // Replace React with Preact only in client production build
    Object.assign(config.resolve.alias, {
      'react/jsx-runtime.js': 'preact/compat/jsx-runtime',
      react: 'preact/compat',
      'react-dom/test-utils': 'preact/test-utils',
      'react-dom': 'preact/compat',
    })
  }
  ```
- **ä½œç”¨æœºåˆ¶**: åœ¨ç”Ÿäº§æ„å»ºæ—¶ï¼Œå°† React æ›¿æ¢ä¸º Preactï¼ˆè½»é‡çº§ React æ›¿ä»£å“ï¼‰ï¼Œå‡å°‘ç”Ÿäº§åŒ…å¤§å°
- **æ˜¯å¦å¿…é¡»**: ğŸ”„ **æ¡ä»¶å¿…é¡»**
  - å¦‚æœ**ä¿ç•™**æ­¤ä¼˜åŒ–é…ç½®ï¼š**å¿…é¡»**ä¿ç•™ `preact` âœ…
  - å¦‚æœ**ç§»é™¤**æ­¤ä¼˜åŒ–é…ç½®ï¼šå¯ä»¥**åŒæ—¶åˆ é™¤** `preact` âœ…
- **å½±å“åˆ†æ**:
  - ä¿ç•™ preactï¼šç”Ÿäº§åŒ…ä½“ç§¯ â†“ ~30KBï¼Œä½†å¤šä¸€ä¸ªä¾èµ–
  - åˆ é™¤ preactï¼šéœ€åˆ é™¤ next.config.js ä¸­çš„ alias é…ç½®ï¼ŒåŒ…ä½“ç§¯ â†‘ ~30KB
- **èŠ‚çœä½“ç§¯**: ~30KBï¼ˆåˆ é™¤é…ç½®åçš„ä»£ä»·ï¼‰

#### `@sentry/replay` (^7.116.0)

- **å½“å‰ç”¨é€”**: ä»…åœ¨é”™è¯¯ç›‘æ§ä¸­é…ç½®
- **æ˜¯å¦å¿…é¡»**: âŒ å¯é€‰
- **å»ºè®®**: å¦‚æ— ä¼šè¯é‡æ”¾éœ€æ±‚ï¼Œç§»é™¤
- **æ¡ä»¶**: ä¿ç•™ `@sentry/nextjs`ï¼Œä»…åˆ é™¤æ­¤åŒ…
- **èŠ‚çœä½“ç§¯**: ~15KB

#### `socket.io` & `socket.io-client` (^4.8.1)

- **å½“å‰ç”¨é€”**: åœ¨ `ClientReload.js` ä¸­ç”¨äºçƒ­æ›´æ–°
- **æ˜¯å¦å¿…é¡»**: ğŸ”„ å¼€å‘æ—¶æ¨èï¼Œç”Ÿäº§ä¸éœ€è¦
- **å»ºè®®**: ç§»è‡³å¼€å‘ä¾èµ–
- **æ¡ä»¶**: ä»…åœ¨å¼€å‘æ—¶éœ€è¦çƒ­åˆ·æ–°åŠŸèƒ½
- **èŠ‚çœä½“ç§¯**: ~60KB

#### `@mailchimp/mailchimp_marketing` (^3.0.80)

- **å½“å‰ç”¨é€”**: é‚®ä»¶è®¢é˜…ï¼ˆéœ€åœ¨ `siteMetadata.js` ä¸­é…ç½®ä½¿ç”¨ï¼‰
- **æ˜¯å¦å¿…é¡»**: âŒ å®Œå…¨å¯é€‰
- **å»ºè®®**: å¦‚ä¸ä½¿ç”¨é‚®ä»¶è®¢é˜…åŠŸèƒ½ï¼Œç§»é™¤
- **æ¡ä»¶**: éœ€è¦æ£€æŸ¥æ˜¯å¦åœ¨æ¨¡æ¿ä¸­è¢«ä½¿ç”¨
- **èŠ‚çœä½“ç§¯**: ~50KB

#### `rehype-preset-minify` (7.0.1)

- **å½“å‰ç”¨é€”**: HTMLå‹ç¼©ï¼ˆMDXç¼–è¯‘åå‹ç¼©ï¼‰
- **æ˜¯å¦å¿…é¡»**: â­â­ å¯é€‰ä¼˜åŒ–
- **å»ºè®®**: å¯é€‰ï¼Œä¿ç•™èƒ½æå‡æ€§èƒ½
- **æ¡ä»¶**: ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½
- **èŠ‚çœä½“ç§¯**: ~5KB

#### å­—ä½“åº“ `@fontsource/inter` (^5.2.8)

- **å½“å‰ç”¨é€”**: Interå­—ä½“åŠ è½½
- **æ˜¯å¦å¿…é¡»**: âŒ å¯é€‰
- **å»ºè®®**: å¯ç”¨ç³»ç»Ÿå­—ä½“æˆ–Web Fontæ›¿ä»£
- **æ›¿ä»£æ–¹æ¡ˆ**: ç”¨ Google Fonts æˆ–ç³»ç»Ÿå­—ä½“
- **èŠ‚çœä½“ç§¯**: ~20KB

#### åˆ†æå·¥å…· (å¯æ ¹æ®éœ€æ±‚)

- `@sentry/nextjs` - å¦‚ä¸éœ€è¦é”™è¯¯ç›‘æ§ï¼Œç§»é™¤
- `web-vitals` - å¦‚ä¸ä¸ŠæŠ¥æ€§èƒ½æ•°æ®ï¼Œç§»é™¤

---

### 2. **å¯ä»¥æ¡ä»¶ç§»é™¤çš„ä¾èµ–** âš ï¸

| åŒ…å                             | å½“å‰ç”¨é€”     | ç§»é™¤æ¡ä»¶           | å½±å“                |
| -------------------------------- | ------------ | ------------------ | ------------------- |
| `reading-time`                   | è®¡ç®—é˜…è¯»æ—¶é—´ | ä¸éœ€è¦æ˜¾ç¤ºé˜…è¯»æ—¶é—´ | å‰ç«¯æ˜¾ç¤ºç¼ºå¤±        |
| `image-size`                     | è·å–å›¾ç‰‡å°ºå¯¸ | é™æ€è®¾ç½®å›¾ç‰‡å°ºå¯¸   | æ€§èƒ½/è‡ªé€‚åº”åŠŸèƒ½ç¼ºå¤± |
| `@mailchimp/mailchimp_marketing` | é‚®ä»¶è®¢é˜…     | ä¸ä½¿ç”¨é‚®ä»¶åŠŸèƒ½     | è®¢é˜…åŠŸèƒ½ä¸å¯ç”¨      |
| `rehype-citation`                | å¼•ç”¨æ”¯æŒ     | ä¸å†™å­¦æœ¯æ–‡ç«        | å¼•ç”¨æ ¼å¼ä¸å¯ç”¨      |
| `remark-math` & `rehype-katex`   | LaTeXå…¬å¼    | ä¸å†™æ•°å­¦æ–‡ç«        | å…¬å¼æ˜¾ç¤ºä¸å¯ç”¨      |

---

### 3. **å¼€å‘å·¥å…·æ˜¯å¦å¿…é¡»** ğŸ› ï¸

#### å¼ºçƒˆæ¨èä¿ç•™

- `prettier` - ä»£ç æ ¼å¼åŒ–
- `eslint` - ä»£ç æ£€æŸ¥
- `jest` - æµ‹è¯•æ¡†æ¶ï¼ˆå·²é…ç½®ï¼‰
- `husky` - Gité’©å­
- `lint-staged` - é¢„æäº¤æ£€æŸ¥

#### å¯é€‰ç§»é™¤

- `@next/bundle-analyzer` - ä»…ç”¨äºåˆ†æåŒ…å¤§å°
- `@testing-library/*` - å¦‚æœªç¼–å†™æµ‹è¯•å¯ç§»é™¤
- `socket.io*` - ä»…ç”¨äºå¼€å‘çƒ­æ›´æ–°

---

## ğŸ“ˆ ä¾èµ–å¤§å°ç»Ÿè®¡

### å½“å‰é…ç½®

```
ç”Ÿäº§ä¾èµ–: 26ä¸ª
å¼€å‘ä¾èµ–: 14ä¸ª
æ€»è®¡: 40ä¸ª

ä¼°è®¡æ€»åŒ…å¤§å°: ~300-400MB (node_modules)
```

### ä¼˜åŒ–åé¢„è®¡

```
ç§»é™¤ä»¥ä¸‹éå¿…é¡»:
- preact (~3KB)
- @sentry/replay (~15KB)
- socket.io* (~60KB) â†’ ç§»è‡³devDep
- @mailchimp/mailchimp_marketing (~50KB)
- @fontsource/inter (~20KB)
- rehype-preset-minify (~5KB)

æ€»è®¡å¯èŠ‚çœ: ~150KBï¼ˆå®é™…å¯èƒ½æ›´å¤šï¼‰
```

---

## ğŸ¯ å»ºè®®æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šæ¿€è¿›ä¼˜åŒ– (æœ€å°åŒ–ä¾èµ–)

**ç§»é™¤**: `@sentry/replay`, `@mailchimp/mailchimp_marketing`, `@fontsource/inter`, `reading-time`, `socket.io*`

**åŒæ—¶ç§»é™¤** `next.config.js` ä¸­çš„ Preact åˆ«åé…ç½®ï¼Œåˆ é™¤ `preact` ä¾èµ–

**ä¿ç•™å¿…é¡»**: Next.js, React, Tailwind, MDXç›¸å…³, æ ¸å¿ƒå·¥å…·

### æ–¹æ¡ˆBï¼šå¹³è¡¡ä¼˜åŒ– (æ¨è) â­

**ç§»é™¤**: `@mailchimp/mailchimp_marketing`, `@fontsource/inter`, `@sentry/replay`

**ä¿ç•™**: `preact` + é…ç½®ï¼ˆç”Ÿäº§ä¼˜åŒ–ï¼‰ï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ + åˆ†æå·¥å…·

**è€ƒè™‘ç§»è‡³devDep**: `socket.io*`ï¼ˆä»…å¼€å‘ç”¨ï¼‰

**ç‰¹ç‚¹**:

- ä¿ç•™ç”Ÿäº§ä¼˜åŒ–ï¼ˆå‡å°‘30KBåŒ…ä½“ç§¯ï¼‰
- æ¸…ç†æ— ç”¨ä¾èµ–
- åŠŸèƒ½å®Œæ•´

### æ–¹æ¡ˆCï¼šä¿å®ˆæ–¹æ¡ˆ (æœ€å°å˜åŠ¨)

**ç§»é™¤**: `@mailchimp/mailchimp_marketing`, `@fontsource/inter`

**æ•´ç†**: æ¢³ç† socket.io æ˜¯å¦å¿…é¡»

**ä¿ç•™**: åŒ…æ‹¬ `preact` å’Œæ‰€æœ‰åˆ†æå·¥å…·

---

## ğŸ” Preact æ·±åº¦åˆ†æ (ä¸“é¡¹)

### å‘ç°ç»è¿‡

1. **åˆæ­¥æœç´¢**: ä»£ç ä¸­æœªå‘ç°ç›´æ¥çš„ `import preact` è¯­å¥
2. **é…ç½®æ£€æŸ¥**: åœ¨ `next.config.js` ä¸­å‘ç° webpack alias é…ç½®
3. **æœ€ç»ˆç»“è®º**: **preact å®é™…è¢«ä½¿ç”¨ï¼Œä½†æ–¹å¼éšè”½**

### å·¥ä½œåŸç†

```javascript
// next.config.js è¡Œ78-84
webpack: (config, { dev, isServer }) => {
  if (!dev && !isServer) {
    // ä»…åœ¨ç”Ÿäº§ç¯å¢ƒçš„å®¢æˆ·ç«¯æ„å»ºæ—¶
    Object.assign(config.resolve.alias, {
      'react/jsx-runtime.js': 'preact/compat/jsx-runtime',
      react: 'preact/compat',
      'react-dom/test-utils': 'preact/test-utils',
      'react-dom': 'preact/compat',
    })
  }
}
```

**æ‰§è¡Œæ—¶æœº**: ä»…åœ¨ä»¥ä¸‹æ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶æ¿€æ´»ï¼š

- âœ… `dev === false`ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- âœ… `isServer === false`ï¼ˆå®¢æˆ·ç«¯ä»£ç ï¼‰

### æ€§èƒ½å½±å“å¯¹æ¯”

| æŒ‡æ ‡       | ä¿ç•™ preact | ç§»é™¤ preact  |
| ---------- | ----------- | ------------ |
| ç”Ÿäº§åŒ…å¤§å° | è¾ƒå° â†“      | è¾ƒå¤§ â†‘ ~30KB |
| è¿è¡Œæ—¶æ€§èƒ½ | æä½³ âœ…     | æ ‡å‡†         |
| ä¾èµ–æ•°é‡   | å¤š 1ä¸ª      | å°‘ 1ä¸ª       |
| å¼€å‘ä½“éªŒ   | æ— å·®å¼‚      | æ— å·®å¼‚       |
| æµ‹è¯•/å¼€å‘  | React è¡Œä¸º  | React è¡Œä¸º   |

### å»ºè®®å†³ç­–æ ‘

```
â”Œâ”€ æ˜¯å¦åœ¨ä¹ç”Ÿäº§åŒ…ä½“ç§¯ï¼Ÿ
â”‚  â”œâ”€ YES (ä¼˜å…ˆ) â†’ ä¿ç•™ preact + é…ç½® âœ…
â”‚  â””â”€ NO (ç®€åŒ–) â†’ åˆ é™¤ preact å’Œ alias é…ç½®
â”‚
â””â”€ æ˜¯å¦è¿½æ±‚æœ€å°ä¾èµ–ï¼Ÿ
   â”œâ”€ YES (æè‡´) â†’ åˆ é™¤ preact å’Œ alias é…ç½®
   â””â”€ NO (å®ç”¨) â†’ ä¿ç•™ preact + é…ç½® âœ…
```

### ç§»é™¤ Preact çš„å®Œæ•´æ­¥éª¤

å¦‚æœå†³å®šç§»é™¤ preactï¼Œéœ€è¦ï¼š

1. **åˆ é™¤ä¾èµ–**

   ```bash
   npm uninstall preact
   ```

2. **ä¿®æ”¹ next.config.js**

   ```javascript
   // ç§»é™¤ä»¥ä¸‹é…ç½®
   if (!dev && !isServer) {
     Object.assign(config.resolve.alias, {
       'react/jsx-runtime.js': 'preact/compat/jsx-runtime',
       react: 'preact/compat',
       'react-dom/test-utils': 'preact/test-utils',
       'react-dom': 'preact/compat',
     })
   }
   ```

3. **éªŒè¯æ„å»º**
   ```bash
   npm run build
   next start  # éªŒè¯ç”Ÿäº§ç¯å¢ƒ
   ```

---

- [ ] æ£€æŸ¥ `@mailchimp/mailchimp_marketing` åœ¨ä»£ç ä¸­çš„ä½¿ç”¨-----éœ€è¦æˆ‘æ‰‹åŠ¨å¯ç”¨è¿™ä¸ªæœåŠ¡
- [ ] æ£€æŸ¥ `preact` æ˜¯å¦çœŸçš„æœªè¢«ä½¿ç”¨
- [ ] ç¡®è®¤æ˜¯å¦éœ€è¦ Sentry ä¼šè¯é‡æ”¾åŠŸèƒ½
- [ ] å†³å®šæ˜¯å¦éœ€è¦é‚®ä»¶è®¢é˜…åŠŸèƒ½
- [ ] è¯„ä¼° socket.io çš„å¿…è¦æ€§ï¼ˆä»…å¼€å‘ç”¨ï¼‰
- [ ] æµ‹è¯•åˆ é™¤åçš„åŠŸèƒ½å®Œæ•´æ€§

---

## æ€»ç»“

**ğŸ”´ å‘ç°**: `preact` è™½ç„¶ä»£ç ä¸­æ²¡æœ‰ç›´æ¥å¯¼å…¥ï¼Œä½†**å®é™…ä¸Šåœ¨ webpack åˆ«åé…ç½®ä¸­è¢«ä½¿ç”¨**ï¼

**çœŸæ­£çš„éå¿…é¡»ä¾èµ–æ€»æ•°**: çº¦ **6-8ä¸ª**

**Preact çš„çœŸå®æƒ…å†µ**:

- âœ… **è¢«ä½¿ç”¨** - é€šè¿‡ webpack alias åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œ React â†’ Preact æ›¿æ¢
- ğŸ“Š **ä½œç”¨** - ç”Ÿäº§åŒ…ä¼˜åŒ–ï¼Œå‡å°‘ ~30KB
- ğŸ¯ **å†³ç­–**:
  - **ä¿ç•™æ–¹æ¡ˆ**: ä¿ç•™ preact é…ç½®å’Œä¾èµ–ï¼ˆæ¨èï¼‰ï¼Œäº«å—åŒ…ä½“ç§¯ä¼˜åŒ–
  - **ç§»é™¤æ–¹æ¡ˆ**: åŒæ—¶åˆ é™¤ next.config.js ä¸­çš„ alias é…ç½®å’Œ preact ä¾èµ–

**ä¸»è¦è‡ƒè‚¿æº**:

1. `@mailchimp/mailchimp_marketing` - é‚®ä»¶æœåŠ¡ï¼ˆæœªé…ç½®ä½¿ç”¨ï¼‰âŒ
2. `@fontsource/inter` - è‡ªå®šä¹‰å­—ä½“ï¼ˆå¯ç”¨ç³»ç»Ÿå­—ä½“æ›¿ä»£ï¼‰â­
3. `@sentry/replay` - ä¼šè¯é‡æ”¾ç›‘æ§ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰â­
4. `socket.io*` - ä»…å¼€å‘çƒ­æ›´æ–°ç”¨ï¼ˆåº”ç§»è‡³devDepï¼‰ğŸ“¦
5. `reading-time` - é˜…è¯»æ—¶é—´ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰â­
6. `preact` - âš ï¸ **æœ‰æ¡ä»¶ä½¿ç”¨**ï¼ˆé…ç½®ä¼˜åŒ–ï¼Œä¿ç•™æ›´ä¼˜ï¼‰âœ…

**å»ºè®®**: æŒ‰ **æ–¹æ¡ˆB (å¹³è¡¡ä¼˜åŒ–)** æ‰§è¡Œï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘ä¾èµ–ï¼ˆ6-7ä¸ªï¼‰ï¼ŒåŒæ—¶ä¿ç•™æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å’Œç”Ÿäº§ä¼˜åŒ–ã€‚
