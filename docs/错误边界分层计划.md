# 错误边界分层计划

## 目标

在页面不同区域使用细粒度的错误边界，避免单点故障导致整页不可用，同时提升调试与用户体验。

## 方案

- 引入区域化边界组件：`components/RegionErrorBoundary.js`（已新增）。
- 使用位置：
  - 文章目录（TOC）与评论模块
  - 动态加载组件（如搜索模态、图片优化组件）
  - 社交分享与订阅表单
- 包装示例：

  ```jsx
  import RegionErrorBoundary from '@/components/RegionErrorBoundary'

  ;<RegionErrorBoundary label="搜索">
    <Search />
  </RegionErrorBoundary>
  ```

## 上报与可观测性

- 继续使用 Sentry（已集成），在 `componentDidCatch` 上报 `componentStack`。
- 后续可增加 `label` 作为 `tags` 维度，便于定位区域问题。

## 验证

- 人为抛出错误验证：在被包裹组件中抛出异常，确认仅该区域回退，页面其他部分仍可用。
